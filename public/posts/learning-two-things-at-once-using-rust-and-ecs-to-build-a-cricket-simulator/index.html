<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  










  



  
  

<link rel="stylesheet" href="/scss/main.min.css" />


  
<meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  

<title>Learning two things at once - using Rust and ECS to build a cricket simulator</title>


<meta name="author" content="">

<meta name="description" content="">
<link rel="canonical" href="/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/">
<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Learning two things at once - using Rust and ECS to build a cricket simulator">
<meta property="og:description" content="Here is a strategy for time-poor working parents who are trying to learn new things: try to learn two new things at once. That&rsquo;s what I did recently when trying to pick up a bit of Rust. For the uninitiated, Rust is a fairly new, relatively low-level &ldquo;systems programming&rdquo; language with an emphasis on speed and safety. I&rsquo;ve been wanting to learn Rust for a while, and have been looking for a side project that could work as an excuse.">
<meta property="og:url" content="/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/">









<meta name="twitter:title" content="Learning two things at once - using Rust and ECS to build a cricket simulator">
<meta name="twitter:description" content="Here is a strategy for time-poor working parents who are trying to learn new things: try to learn two new things at once. That&rsquo;s what I did recently when trying to pick up a bit of Rust. For the uninitiated, Rust is a fairly new, relatively low-level &ldquo;systems programming&rdquo; language with an emphasis on speed and safety. I&rsquo;ve been wanting to learn Rust for a while, and have been looking for a side project that could work as an excuse.">



  <meta name="twitter:card" content="summary">






<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Person",
      "@id": "/#/schema/person/1",
      "name":  null ,
      "url": "/",
      "image": {
        "@type": "ImageObject",
        "@id": "/#/schema/image/1",
        "url": "/\u003cnil\u003e",
        "width": null ,
        "height": null ,
        "caption":  null 
      }
    },
    {
      "@type": "WebSite",
      "@id": "/#/schema/website/1",
      "url": "/",
      "name": "Clinton Boys",
      "description":  null ,
      "publisher": {
        "@id": "/#/schema/person/1"
      }
    },
    {
      "@type": "WebPage",
      "@id": "/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/",
      "url": "/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/",
      "name": "Learning two things at once - using Rust and ECS to build a cricket simulator",
      "description":  null ,
      "isPartOf": {
        "@id": "/#/schema/website/1"
      },
      "about": {
        "@id": "/#/schema/person/1"
      },
      "datePublished": "0001-01-01T00:00:00+00:00",
      "dateModified": "0001-01-01T00:00:00+00:00",
      "breadcrumb": {
        "@id": "/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/#/schema/breadcrumb/1"
      },
      "primaryImageOfPage": {
        "@id": "/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/#/schema/image/2"
      },
      "inLanguage":  null ,
      "potentialAction": [{
        "@type": "ReadAction", "target": ["/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/"]
      }]
    },
    {
      "@type": "BreadcrumbList",
      "@id": "/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/#/schema/breadcrumb/1",
      "name": "Breadcrumbs",
      "itemListElement": [{
        "@type": "ListItem",
        "position":  1 ,
        "item": {
          "@type": "WebPage",
          "@id": "",
          "url": "",
          "name": "Home"
          }
        },{
        "@type": "ListItem",
        "position":  3 ,
        "item": {
          "@type": "WebPage",
          "@id": "/posts/",
          "url": "/posts/",
          "name": "Posts"
          }
        },{
        "@type": "ListItem",
        "position":  4 ,
        "item": {
          "@id": "/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/"
          }
        }]
    },
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Article",
          "@id": "/#/schema/article/1",
          "headline": "Learning two things at once - using Rust and ECS to build a cricket simulator",
          "description": "",
          "isPartOf": {
            "@id": "/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/"
          },
          "mainEntityOfPage": {
            "@id": "/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/"
          },
          "datePublished": "0001-01-01T00:00:00+00:00",
          "dateModified": "0001-01-01T00:00:00+00:00",
          "author": {
            "@id": "/#/schema/person/1"
          },          
          "publisher": {
            "@id": "/#/schema/person/1"
          },
          "image": {
            "@id": "/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/#/schema/image/2"
          }
        }
      ]
    },{
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "ImageObject",
          "@id": "/posts/learning-two-things-at-once-using-rust-and-ecs-to-build-a-cricket-simulator/#/schema/image/2",
          "url":  null ,
          "contentUrl":  null ,
          "caption": "Learning two things at once - using Rust and ECS to build a cricket simulator"
        }
      ]
    }
  ]
}
</script>
  

  

</head><body>
    <header class="container">
  <nav class="main-nav" id="js-navbar">
    <a class="logo" href="">Clinton Boys</a>
    <ul class="menu" id="js-menu">
      
      
      
        <li class="menu-item">
          <a href="/about/" class="menu-link">About</a>
        </li>
      
      
      
        <li class="menu-item">
          <a href="http://mtsolitary.com" class="menu-link">Digital Garden</a>
        </li>
      
      
      
        <li class="menu-item">
          <a href="/now/" class="menu-link">Now</a>
        </li>
      
      
      
        <li class="menu-item">
          <a href="/projects/" class="menu-link">Projects</a>
        </li>
      
      
      
        <li class="menu-item">
          <a href="/writing/" class="menu-link">Writing</a>
        </li>
      
      
      <li class="menu-item--align">
        <div class="switch">
          <input class="switch-input" type="checkbox" id="themeSwitch">
          <label aria-hidden="true" class="switch-label" for="themeSwitch">On</label>
          <div aria-hidden="true" class="switch-marker"></div>
        </div>
      </li>
    </ul>
    <span class="nav-toggle" id="js-navbar-toggle">
      <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="30" height="30" fill="var(--color-contrast-high)"><rect y="11" width="24" height="2" rx="1"/><rect y="4" width="24" height="2" rx="1"/><rect y="18" width="24" height="2" rx="1"/></svg>
    </span>
  </nav>
</header><main class="section">
<div class="container">
  <section class="page-header">
    <h1 class="page-header-title">Learning two things at once - using Rust and ECS to build a cricket simulator</h1>
    <div class="post-list-meta">
      <div class="post-list-dates">Jan 1, 0001&nbsp;&middot;&nbsp;4 min.</div>
      
      
    </div>
    <p class="page-header-desc"></p>
    <div class="single-terms">
      
    </div>
  </section>
</div>
<div class="single-container-post">
  

  <div class="single-post-contents">
    <div class="single-feature-img">



  

</div>
    <article class="markdown">
        <p>Here is a strategy for time-poor working parents who are trying to learn new things: try to learn two new things at once. That&rsquo;s what I did recently when trying to pick up a bit of <a href="https://www.rust-lang.org" target="_blank" rel="noopener">Rust</a>. For the uninitiated, Rust is a fairly new, relatively low-level &ldquo;systems programming&rdquo; language with an emphasis on speed and safety. I&rsquo;ve been wanting to learn Rust for a while, and have been looking for a side project that could work as an excuse.</p>
<p>In my experience the <em>subject</em> of a side project, if you want it to be successful and to actually have a chance of finishing it or learning something from it, needs to be something you are passionately interested in (even if the passion is fleeting). I have lots of posts on this site with details about side projects related to my interests: [elections]({{ site.baseurl }}{% link _posts/2015-01-25-aus-election-model-7.md %}), [music]({{ site.baseurl }}{% link _posts/2015-03-30-itunes-and-pitchfork.md %}), [politics]({{ site.baseurl }}{% link _posts/2019-12-21-uk-av-sim.md %}), [emacs]({{ site.baseurl }}{% link _posts/2020-05-20-emacs-i.md %}), [mathematics]({{ site.baseurl }}{% link _posts/2020-09-01-kepler.md %}). So for this project I chose another interest: cricket.</p>
<p>And here comes the second thing I wanted to learn: the ECS (Entity Component System) programming paradigm, commonly used in game development. So the project comes into shape: use Rust, and an ECS framework, to build a cricket simulator. Sounds like fun!</p>
<p>Initially I had thought to just build out a scoreboard that updates as you click through the deliveries of the game. This would definitely give me enough to work on, learning how to set up all the entities I need, the components, the systems that update the scoreboard. But I figured it would be a little boring to look at, so decided in the end to make a visualisation of the ground and even animate the ball being bowled, hit and fielded.</p>
<p>To do all of this, I used <a href="https://github.com/amethyst/bracket-lib" target="_blank" rel="noopener">rltk</a>, a game engine for Rust, originally designed for &ldquo;Roguelikes&rdquo;, a type of retro computer game with procedurally generated graphics and a &ldquo;dungeon crawl&rdquo; RPG mechanic. rltk provides a lot of very helpful structures to get you up and running; I just render a simple black square and use ASCII art to fill out my field, players, pitch, stumps and scoreboard.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/assets/cricket-sim.png"
	alt="Cricket sim" 
	class="single-post-image" 
	loading="lazy"
	decoding="async"
	></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>Figure 1: The start of a new cricket match.</em></td>
</tr>
</tbody>
</table>
<p>At first I just hardcoded to make sure it rendered correctly. Then I set about replacing all of the things you see in the image above with <em>entities</em>, <em>components</em> and <em>systems</em> according to the ECS paradigm.</p>
<p>For example, there is a <code>DisplayGlyph</code> component which contains the information required to display the correct symbol for a player (batsman, bowler, fielder, keeper, umpire). Then there&rsquo;s the <code>Position</code> component which describes where on the map to render the symbol. If you then insert an entity into the game, and populate it with components, you can define a <code>display_system</code> to make sure the glyphs are rendered in their correct positions every loop.</p>
<p>Similarly, we have <code>bowling_system</code>, <code>batting_system</code>, <code>fielding_system</code> which moves everything around the map according to logic, alongside the <code>scoreboard_system</code> which updates the scoreboard and the <code>match_system</code> which determines the ultimate winning logic and ends the game.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/assets/cricket-sim-2.png"
	alt="Cricket sim 1" 
	class="single-post-image" 
	loading="lazy"
	decoding="async"
	></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>Figure 2: Through midwicket for 1 run.</em></td>
</tr>
</tbody>
</table>
<p>Overall this exercise was really fun and it taught me a lot about game development, ECS and in particular Rust. Rust feels really well suited to building games: its neat &ldquo;structs&rdquo;, cruel but fair type system and ingenious borrow checker are all very useful when you are writing code that needs to be performant and run every click. Writing a game also makes you think a lot harder about the loops you write, about data structures and memory and CPU efficiency. I enjoyed it a lot.</p>
<p>The code for this project is available on my <a href="https://github.com/clintonboys/rustycricket" target="_blank" rel="noopener">Github</a>.</p>
<h3 id="links-and-resources"></h>Links and resources<a href="#links-and-resources">
    
  </a>
</h3><ul>
<li>A very quick <a href="https://fasterthanli.me/articles/a-half-hour-to-learn-rust" target="_blank" rel="noopener">half-hour</a> introduction to Rust.</li>
<li>A really nice <a href="https://os.phil-opp.com/" target="_blank" rel="noopener">tutorial</a> on writing a bare-bones operating system in Rust.</li>
<li>A fantastic <a href="https://bfnightly.bracketproductions.com/chapter_1.html" target="_blank" rel="noopener">guide</a> on writing a roguelike in Rust using rltk.</li>
<li>A nice <a href="https://robert.kra.hn/posts/rust-emacs-setup/" target="_blank" rel="noopener">post</a> on setting up emacs for Rust development.</li>
<li>100 <a href="https://rust-exercises.com" target="_blank" rel="noopener">exercises</a> to help to learn Rust.</li>
</ul>

    </article>
    <aside>
      <div class="single-terms">
        
      </div>
      
        

        
  <section>
    <h2>Read Next</h2>
    <div class="single-next-previous">
      
        <a class="previous" href="/posts/lifetime-flight-simulator/">&laquo; Lifetime flight simulator</a>
      
      
        <a class="next" href="/posts/installing-mediawiki-on-a-digitalocean-droplet-including-wikipedia-navbars/">Installing MediaWiki on a DigitalOcean droplet (including Wikipedia navbars) &raquo;</a>
      
    </div>
  </section>

      
    </aside>
  </div>
</div>

    </main><footer>
  
  <div class="section footer">
    <p class="footer-copyright"><i>&copy; 2014 - 2024
      Clinton Boys</i>
      
    </p>
    
  </div>
</footer>

  








  
  
    

<script src="/main.min.js"></script>



  
</body>
</html>
